
# 脳梗塞発症ーなぜ、寿命予想アプリを開発か？

6月の蒸し暑い土曜の午後、椅子に座ってPCで厚生労働省年金局から送られてきた資料を見ていた。国民の老後の生活を支えるはずの厚生年金の水準を守る意識が全く感じられない内容に憤慨し、「なんじゃこれは！」と呟いたその瞬間、右半身が急に動かなくなった。

仕事柄（生命保険）、これは脳梗塞だとすぐにわかった。実は5日前に人間ドックを受けて結果がオールAだったことに気を良くし、その日も午前中に10kmほどジョギングをした直後のことだった。

さらに嘔吐も始まり、家族に頼んで救急車を呼んでもらった。しかし、週末で救急病院はどこも満床状態だった。2時間ぐらいかかったが、なんとか脳外科のある病院に搬送してもらうことができた。

## とんでもない誤診ー自然治癒で一命を取り留める

運悪く、搬送先の病院にいた医師は、アルバイト宿直の医師で、脳神経外科は専門外（主に外傷などの外科治療が専門）だった。そのため、右半身が動かない状態にもかかわらず、「CTには何も異常がありませんね。精神的なもので、登校拒否する児童にも見られる症状です」と、とんでもない誤診を下されてしまった。

危うく自宅に帰されそうになったが、かなり強く交渉した結果、なんとか入院することはできた。しかし、週末の間は治療もされず放置される形となった。月曜になり、ようやく脳神経外科の専門医が出勤し、MRIを撮影したところ、脳梗塞であることが判明した。だが、治療開始のタイムリミットとされる48時間はすでにとっくに過ぎていた。

発症部位がくも膜下（小脳）であったため、再発すれば命に関わるとの判断から、専門病院に転院となり、直ちにICUに搬送された。しかし、そこで行われたのは治療ではなく、再発を防ぐための観察にとどまった。

## 健康診断「見ないふり」が問題の根源

結局のところ、最初のアルバイト医師による誤診があったものの、発症した箇所が幸か不幸か命に関わる小脳部分であり、人体に備わった自然治癒力によって命を取り留めることができたという結末である。幸いなことに、それから6年経った現在でも重大な後遺症は残っておらず、医療過誤として問題にすることはしなかった。

後遺症としては以下の4つが挙げられる。

- マラソンなど長距離を走れなくなった。
- 歌うと音程が微妙にズレる（ビッグエコーのAIコメント）。
- 喘息のような咳が出る。
- 気に入らない仕事をしたくなくなった。

一方で、私自身にも反省点がある。それは、人間ドックの「オールA」という結果を過信してしまったことだ。結果をよく見ると、実はB判定ギリギリの項目が多く含まれていた。また、人間ドックの判定基準は、生命保険会社が保険料を割り出すための基準点に比べると、かなり甘めに設定されているという事実にも気づかされた。

この経験から得た教訓は、**定期検診や人間ドックの結果を軽視してはならない**ということである。表面的な結果に安心せず、細部までしっかり確認し、日常の健康管理に活かしていくことの重要性を痛感した。

私だけでなく、多くの人が、定期健康診断や人間ドックの最後に行われる問診で「特に問題はないですよ」と言われると、その言葉を鵜呑みにしてしまい、結果表を詳しく確認しない傾向があるのではないだろうか。医師が限られた時間で多くの患者を診なければならないため、そう言わざるを得ない事情があるのかもしれない。また、患者側も短い時間の中で質問をしづらいと感じることが多い。

その結果、健康診断の結果をじっくり確認することなく、「まあ大丈夫だろう」と思い込んでしまう。いわゆる**見ないふり**である。これは決して他人事ではなく、誰にでも起こり得ることだ。この「見ないふり」を防ぐためには、医師の言葉だけに頼らず、自分自身でも結果表をしっかり確認し、不安な点があれば積極的に質問する姿勢が大切だろう。

この「見ないふり」を予防するために開発したのが、「私の寿命、あと何年？」というアプリです。長々と個人的な経験を書いたのは、このアプリをいかに真剣に、そして熱心に開発しているかをお伝えしたかったからです。

開発の経緯からも分かるように、このアプリの最も熱心なユーザーは他でもない私自身です。そのため、寿命の予測は極めて真摯に、そして正確を期して行っています。この姿勢を理解していただければ、私がいかにこのアプリに真剣に取り組んでいるかを感じ取っていただけるのではないかと思います。

できれば、他の方にもこのアプリを使っていただき、「見ないふり」を防止するきっかけにしてほしいと願っています。私自身のために作ったアプリですが、その利便性や価値を他の方にも共有できればと考えています。この「自分のために作ったものを他人にも使っていただく」というスタンスは今後も変えるつもりはありませんし、このスタンスこそがアプリへの信頼性につながると信じています。

# 保険数理等を寿命予想に応用

寿命予測の方法は、生命保険会社が保険引受の際に、保険加入申込者の健康状態から保険料を計算する手法をベースにしています。このプロセスでは、保険料を算出する前段階で、申込者の推定死亡率、つまり寿命を予測する中間的な副産物が生まれます。私のアプリでは、この副産物を寿命予想としてオープンにする形を取っています。生命保険会社は200年以上にわたりこの種の推定を行ってきた歴史があるため、その精度には一定の信頼を置けると考えています。

さらに、私のこれまでのキャリアで得た経験もこのアプリに活かされています。例えば、ITコンサル会社に勤務していた際には、定期健康診断データやライフスタイルに関する質問・回答データを活用し、保険引受モデルを改善するビッグデータ・プロジェクトに携わりました。また、再保険会社で働いていた時には、生命保険会社が引き受けられないような健康状態が悪い人や余命が短い人の生命保険を下取りする際のリスクモデル構築にも関わりました。さらに、AIベンチャーでは、歩数や心拍数のデータをもとにしたモデル開発も行いました。

これらの経験と、私自身が脳梗塞を経験したことが線で結ばれ、現在のアプリ開発へとつながっているのだと感じています。単なる思いつきではなく、長年積み上げてきた専門知識と実体験の結晶として、このアプリを提供できることを誇りに思っています。

# アプリの仕組み

## ユーザーによるデータ入力

定期健康診断の結果、服薬情報、ライフスタイルに関するデータをユーザーに入力していただきます。

データ入力の自動化について：AIベンチャーで試行したスキャン機能は、処理時間が長く、エラー率が約5%であったため、現在は採用していません。ただし、技術の進展や精度向上が見込める場合には、将来的に自動入力機能を取り入れたいと考えています。

## 寿命計算と問題点の洗い出し

ユーザーの入力データをもとに寿命を計算し、健康上の問題点を特定します。

問題点の分析は部位別に行い、体格（BMI）、血圧、コレステロールなど、最大15項目に分類されます。これにより、具体的な健康リスクを視覚的に把握できます。

## OpenAI APIを活用したアドバイス生成

問題点ごとに、OpenAIのGPT-4 APIを活用してプロンプトを生成し、適切なアドバイスを得ます。

アドバイスはブラウザで表示され、ユーザーが保存や共有しやすいようにPDFファイルとしてエクスポートする機能もサポートします。

## 固定的なライフスタイル結果の提供

飲酒や喫煙のように、リスクや影響が比較的固定的なライフスタイル要素については、あらかじめAIで作成した回答をパターン化し、ユーザーに提供します。これにより、計算の効率化と応答速度の向上を図っています。

この構成は、現状の技術を活かしつつ、将来的な拡張や改善を視野に入れた設計となっています。

# GraphAIを利用して並列処理

寿命予測アプリの開発において、技術的な大きな課題となったのは、最大15個の問題点に対してプロンプトを生成し、それをOpenAIに問い合わせる部分でした。一つのプロンプトに全ての問題を詰め込んで送信すると、回答が要約されすぎてしまい、期待していた詳細なアドバイスを得ることができません。一方で、15個のプロンプトを同時に送信してしまうと、OpenAIの時間あたりのトークン数制限に引っかかってしまい、リクエストが途中で止まったりエラーになるという問題が発生していました。

この課題を解決するきっかけとなったのが **[GraphAI](https://singularitysociety.org/projects/ai/graphai/)** でした。このツールは、非同期処理を行う際に、タスク間の依存関係をグラフで描くだけで、自動的に効率的な処理順序を計算してくれる機能を持っています。GraphAIを使うことで、問題点ごとにプロンプトを分割しつつ、それぞれの優先度や処理の順序を指定することが可能になり、OpenAIのトークン制限を回避しながらも粒度の細かいアドバイスを得られるようになりました。

実はこの問題に取り組んでいた当初は、2週間ほど独力で試行錯誤を続けていましたが、なかなかうまくいかずに苦戦していました。そんな中でGraphAIに出会い、その機能を試したところ、驚くほど簡単に課題を解決することができたのです。この成功体験から、GraphAIの有用性を実感しました。

GraphAIは、OpenAIとの連携に限らず、他の非同期処理を効率化する際にも非常に役立つツールです。特に、処理の関係性を視覚的に設計できるため、開発者にとって負担が少なく、結果的に時間を大幅に節約できます。私のように、多くのプロンプトを効率よく処理したい方や、並行処理で悩んでいる方には、ぜひこのツールを試していただきたいと思います。

この使い方について、GraphAIの開発者である中島聡さんから「なかなか面白い使い方だ」と評価していただけたことは、大きな励みになりました。こうした経験を通じて、自分の限界を超えるためには新しいツールを積極的に活用することの大切さを学びました。

## 腎機能の悪化ー新たな問題

このアプリを使って、私自身の健康管理を行っています。脳梗塞を発症した後、標準的な治療方針に従い、現在は降圧剤、血液サラサラ薬、コレステロール抑制薬を服用しています。今年も定期健康診断を受け、問診では「特に問題なし」との診断を受けて安心していましたが、結果をアプリに入力して評価してみたところ、去年に比べて寿命が5年も短くなっていることが判明しました。このアプリの記事の表題にもある通り、その理由は腎機能の悪化でした。

「肝心」の語源にも表れているように、寿命に最も大きな影響を与える臓器は肝臓と腎臓です。生命保険会社の引き受け基準も、人間ドックより厳しい内容になっていますが、それは長年の経験から得られた結果です。これらの臓器に悪影響を与える要因として、血圧や糖尿病といった循環器系の問題が挙げられます。

例えば、筋肉をつけるためにプロテインを過剰に摂取すると、肝臓や腎臓に負担がかかり、結果として健康を害する可能性があります。同様に、筋力トレーニングのやり過ぎも寿命を縮める原因となります。適切な運動や栄養管理は重要ですが、何事も過剰は禁物です。

もし私がこのアプリを使っていなかったら、腎臓機能の悪化に気づくこともなく、適切な対応を取ることもなかったでしょう。現在は、腎臓の負担を軽減するために塩分や脂質の制限に取り組んでいます。自画自賛になりますが、このアプリは本当に役に立つと実感しています。薬を服用することでどうしても肝臓や腎臓に負担がかかるため、これからも食事制限をより厳格に行う必要があると考えています。

（以上は、一人のユーザーとしての個人的な感想ですが、このアプリが私自身の健康管理にどれほど役立っているかをお伝えできれば幸いです。）

## 血圧の基準が130から160に

2024年6月から、社会保険における医療機関への受診勧奨基準が、収縮期血圧160mmHg以上に引き上げられました。これにより、収縮期血圧が130mmHgから160mmHgの範囲にある方々は、医療機関での治療を受けるのではなく、自己管理による血圧コントロールが求められることになります。

標準的な治療方針では、収縮期血圧が130mmHgを超える場合、食事内容の見直し、塩分制限、体重管理、有酸素運動などのライフスタイル改善が推奨されています。これらの取り組みによって、血圧を130mmHg未満に誘導することが原則とされています。しかし、改善が見られない場合や、医師の判断によっては、降圧剤が処方されることもあります。

一方で、医療現場では生活指導を行う人手が不足しているため、結果的に降圧剤を処方するケースが多く見られます。そのため、継続的に医療機関を受診することになり、医療費の増加につながっています。このような背景から、協会けんぽでは受診勧奨基準を160mmHgに引き上げたと考えられます。

この変更により、収縮期血圧が130mmHg以上160mmHg未満の方々は、自己管理による血圧コントロールが求められます。しかし、多くの人々は「160mmHgまでは薬を飲まなくても良くなった」と安堵し、自己管理を怠る可能性があります。これは非常に危険な考え方です。

長期的に降圧剤を服用すると、肝臓や腎臓に負担がかかり、寿命を縮める可能性があります。しかし、血圧が高い状態を放置すると、脳梗塞や心筋梗塞などの重大な疾患を引き起こすリスクが高まります。血圧の上昇は、体内の何らかの問題を示すサインであり、人体の自然治癒力が働いている可能性もあります。私自身、治療を受けずに脳梗塞から生還した経験がありますが、これは血圧が200mmHg近くまで上昇し、脳への血流を確保してくれたからだと考えています。

しかし、これはあくまで個人的な経験であり、一般的に高血圧を放置することは非常に危険です。収縮期血圧が130mmHg以上160mmHg未満の方々は、医師の指導のもと、適切な生活習慣の改善や必要に応じた薬物療法を受けることが重要です。自己判断で治療を中断したり、自己管理を怠ったりすることは、健康を損なう大きなリスクとなります。

このように、受診勧奨基準の変更に伴い、自己管理の重要性が増しています。しかし、自己管理だけでなく、定期的な医療機関でのチェックや専門家のアドバイスを受けることが、健康維持には欠かせません。自身の健康状態を正しく理解し、適切な対応を取ることが、長く健康な生活を送るための鍵となります。

## アプリの利用方法

個人的に利用されたい方は、WEBアプリをお使いください。無料です。  
[私の寿命、あと何年？](https://medicalhealth.blob.core.windows.net/medicalhealth/index2.html)

会員の健康増進サービスや、医療機関で利用したい方は、APIを提供しています。公益目的であれば無料です。  
[API利用方法](https://github.com/KenichiNogami/LifeTime)
